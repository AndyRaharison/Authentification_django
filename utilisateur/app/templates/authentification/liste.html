{% extends 'base.html' %}
{% block content%}
<div class=''>
    {% comment %} <form class="flex items-center space-x-6" method= "POST" enctype="multipart/form-data">
        {% csrf_token %}
        <label class="block">
            <span class="sr-only">veuillez importer votre fichier</span>
            <input type="file" class="block w-full text-sm text-slate-500
            file:mr-4 file:py-2 file:px-4
            file:rounded-full file:border-0
            file:text-sm file:font-semibold
            file:bg-violet-50 file:text-violet-700
            hover:file:bg-violet-100
            " name="fichier"/>
            <button class="w-full h-full rounded-md py-2 px-4 bg-blue-500 text-white disabled" type="submit">
            telecharger
            </button>
        </label>
    </form> {% endcomment %}
    <form method= "POST" enctype="multipart/form-data">
        {% csrf_token %}
            <input type="file" name="fichier"/>
            <button type="submit"> telecharger</button>
        {% comment %} {% if message_confirmation %}
            <div class="bg-green-500 text-white p-4 mb-4">
            {{ message_confirmation }}
            </div>
        {% endif %} {% endcomment %}
     
     <div class="container mx-auto mt-4">
    {% if message_confirmation %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
            <strong class="font-bold">Succès !</strong>
            <span class="block sm:inline">{{ message_confirmation }}</span>
        </div>
    {% endif %}
    </form>
    <!-- Votre contenu HTML pour afficher la liste des bénéficiaires ici -->
</div>
</div>
<!-- Barre de recherche -->
<div> 
    <form action="" method="get">
        <label class="relative block">
            <span class="sr-only">recherche</span>
            <span class="absolute inset-y-0 left-0 flex items-center pl-2">
                <svg class="h-5 w-5 fill-slate-300" viewBox="0 0 20 20"><!-- ... --></svg>
            </span>
            <input class="placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm" placeholder="Search for anything..." type="text" name="q"/>
        </label>
    </form>
<div/>    
{% comment %} <a href="{% url 'donne_modif' %}">voir modification</a> {% endcomment %}
<div>
    {%if benefici%}
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            {% comment %} <th scope="col" class="p-4">
                                <div class="flex items-center">
                                    <input id="checkbox-all-search" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="checkbox-all-search" class="sr-only">checkbox</label>
                                </div>
                            </th>
                             <th scope="col" class="px-6 py-3">
                                id
                            </th> {% endcomment %}
                            <th scope="col" class="px-6 py-3">
                                Nom
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Prenom
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Matricule
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Numero Piece
                            </th>
                            <th scope="col" class="px-6 py-3">
                                type piece
                            </th>
                            <th scope="col" class="px-6 py-3">
                                date livrance
                            </th>
                            <th scope="col" class="px-6 py-3">
                                telephone
                            </th>
                            <th scope="col" class="px-6 py-3">
                                email
                            </th>
                            <th scope="col" class="px-6 py-3">
                                date de naissance
                            </th>
                            <th scope="col" class="px-6 py-3">
                                code postale
                            </th>
                            <th scope="col" class="px-6 py-3">
                                sexe
                            </th>
                            <th scope="col" class="px-6 py-3">
                                adresse
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Modifier / Suprimer
                            </th>
                        
                        </tr>
                    </thead>
                    <tbody>
                        {% for person in benefici %}
                        <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                        {% comment %} <td class="w-4 p-4">
                            <div class="flex items-center">
                                
                                {% if Beneficiaire.modifie %}
                                    <span style="color: red;">(Modifié)</span>
                                {% endif %}
                            
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            {{person.id}}
                                {% if Beneficiaire.modifie %}
                                    <span style="color: red;">(Modifié)</span>
                                {% endif %}
                        </td> {% endcomment %}
                        <td class="px-6 py-4">
                            {{person.nom}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.prenom}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.matricule}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.numero_piece}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.type_piece}}
                        </td>
                        <td class="px-6 py-4">
                            ${{person.date_livrance}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.telephone}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.email}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.date_naissance}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.code_postal}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.sexe}}
                        </td>
                        <td class="px-6 py-4">
                            {{person.adresse}}
                        </td>
                        <td class="flex items-center px-6 py-4">
                            <a href="{% url 'modifier_beneficiaire' person.id%}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Modifier</a>
                            <form action="{% url 'suppression' person.id %}" method="post">
                                {% csrf_token %}
                            <input type="submit"  class="btn font-medium text-red-600 dark:text-red-500 hover:underline ms-3" value = "Supprimer">
                            </form>
                        </td>
                        </tr>
                        {% endfor%}
                     </tbody>
            </table>
        </div> 
        
    {%else%}
        <h3 class="justify-center text-center">pas d'importation</h3>
    {%endif%}
</div>
{% comment %} #PAGINATION {% endcomment %}

<div class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
  <div class="flex flex-1 justify-between sm:hidden">
    <a href="#" class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Previous</a>
    <a href="#" class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Next</a>
  </div>
  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
    <div>
      <p class="text-sm text-gray-700">
        Showing
        {% if benefici.has_previous %}
                    <a href="?page=1">first</a>
                    <a href="?page={{ benefici.previous_page_number }}">previous</a>
        {% endif %}
      </p>
    </div>
    <div>
      <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
        {% if benefici.has_previous %}
        <a href="?page={{ benefici.previous_page_number }}" class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
          <span class="sr-only">Previous</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
          </svg>
        </a>
        {% endif %}
        <!-- Current: "z-10 bg-indigo-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600", Default: "text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0" -->
        <a href="#" aria-current="page" class="relative z-10 inline-flex items-center bg-indigo-600 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ benefici.number }}</a>
        <a href="#" class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">Sur</a>
        <a href="#" class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">{{ benefici.paginator.num_pages }}</a>
         {% if benefici.has_next %}
        <a href="?page={{ benefici.next_page_number }}" class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
          <span class="sr-only">Next</span>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
          </svg>
        </a>
        {% endif %}
      </nav>
    </div>
  </div>
</div>

{% comment %} <div class="pagination">
            <span class="step-links">
                {% if benefici.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ benefici.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ benefici.number }} of {{ benefici.paginator.num_pages }}.
                </span>

                {% if benefici.has_next %}
                    <a href="?page={{ benefici.next_page_number }}">next</a>
                    <a href="?page={{ benefici.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
</div> {% endcomment %}

{% endblock content %}


